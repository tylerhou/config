#!/bin/sh

dir=${1:-.}
git check-ignore -q $dir > /dev/null
gitignore=$?
gitroot=$(git -C $dir rev-parse --show-toplevel 2> /dev/null)
gitrepo=$?
if [ $gitrepo -eq 0 -a $gitignore -eq 0 ]; then
  rg -u --files $gitroot
else
  rg --files $dir
fi
